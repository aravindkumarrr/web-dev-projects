<html>
    <head>
        <title>Calculator</title>
        <style>
            body{
                height: 100vh;
                width: 100vw;
                background-color: beige;
                display: flex;
                justify-content: center;
                align-items: center;
                margin: 0;
                padding:0;
            }
            #calc_container{
                height: 750px;
                width: 450px;
                background-color: lightgray;
                border: 0.5px solid grey;
                border-radius: 10px;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                gap: 20px;
            }

            /* FIXED: Scrollable display */
            #disp_container{
                height: 150px;
                width: 420px;
                border: 0.5px solid grey;
                background-color: white;
                margin-top: 20px;
                border-radius: 10px;
                display: flex;
                align-items: center; 
                justify-content: flex-end; 
                padding-right: 20px;
                box-sizing: border-box;
                overflow-x: auto; /* Adds scroll */
                overflow-y: hidden;
            }

            /* Hide Scrollbar */
            #disp_container::-webkit-scrollbar { display: none; }
            #disp_container { -ms-overflow-style: none; scrollbar-width: none; }

            #result_text{
                white-space: nowrap; 
                margin: 0;
                font-size: 50px;
                font-family: Arial, sans-serif;
            }

            #btn_container{
                height: 520px;
                width: 420px;
                border: 0.5px solid grey;
                border-radius: 10px;
                display: flex;
                flex-direction: column;
            }
            .btnrows{
                place-items: stretch;
                padding-left: 3px;
                height: 80px;
            }
            #btnrow1, #btnrow2, #btnrow3, #btnrow4, #btnrow5 {
                width: 400px;
                display: grid;
                grid-template-columns: repeat(4,1fr);
                margin: 5px;
                gap: 4px;
            }
            #btnrow1 { height: 115px; } 

            .SPbtn{
                grid-column: span 2;
                border-radius: 10px;
                border: 0.5px solid;
                height: 104px;
                font-weight: 800;
                font-size: 20px;
                cursor: pointer;
            }
            #AC{ background-color: lightgoldenrodyellow; }
            #DELETE{ background-color: orange; }

            .MATbtn{
                grid-column: span 1;
                border-radius: 10px;
                border: 0.5px solid;
                height: 80px;
                font-weight: 800;
                font-size: 20px;
                cursor: pointer;
            }

            .SPbtn:hover, .MATbtn:hover { background-color: white; }
            .SPbtn:active, .MATbtn:active { background-color: #cccccc; transform: scale(0.95); }
        </style>
    </head>
    <body>
        <div id="calc_container">
            <div id="disp_container">
                <h1 id="result_text"></h1>
            </div>
            <div id="btn_container">
                <div class="btnrows" id="btnrow1">
                    <button class="SPbtn" id="AC" onclick="clearValue()">AC</button>
                    <button class="SPbtn" id="DELETE" onclick="deleteOne()">DELETE</button>
                </div>

                <div class="btnrows" id="btnrow2">
                    <button class="MATbtn" id="7" onclick="appendValue('7')">7</button>
                    <button class="MATbtn" id="8" onclick="appendValue('8')">8</button>
                    <button class="MATbtn" id="9" onclick="appendValue('9')">9</button>
                    <button class="MATbtn" id="divi" onclick="appendValue('/')">/</button>
                </div>

                <div class="btnrows" id="btnrow3">
                    <button class="MATbtn" id="4" onclick="appendValue('4')">4</button>
                    <button class="MATbtn" id="5" onclick="appendValue('5')">5</button>
                    <button class="MATbtn" id="6" onclick="appendValue('6')">6</button>
                    <button class="MATbtn" id="mul" onclick="appendValue('*')">*</button>
                </div>

                <div class="btnrows" id="btnrow4">
                    <button class="MATbtn" id="1" onclick="appendValue('1')">1</button>
                    <button class="MATbtn" id="2" onclick="appendValue('2')">2</button>
                    <button class="MATbtn" id="3" onclick="appendValue('3')">3</button>
                    <button class="MATbtn" id="min" onclick="appendValue('-')">-</button>
                </div>

                <div class="btnrows" id="btnrow5">
                    <button class="MATbtn" id="." onclick="appendValue('.')">.</button>
                    <button class="MATbtn" id="0" onclick="appendValue('0')">0</button>
                    <button class="MATbtn" id="eq" onclick="calculateValue()">=</button>
                    <button class="MATbtn" id="plus" onclick="appendValue('+')">+</button>
                </div>
            </div>
        </div>

        <script>
            let s = "";
            let displayContainer = document.getElementById("disp_container");
            let displayText = document.getElementById("result_text");

            function appendValue(value) {
                s += value;
                displayText.innerHTML = s;
                displayContainer.scrollLeft = displayContainer.scrollWidth;
            }

            function deleteOne(){
                if(s.length > 0){
                    s = s.slice(0,-1);
                    displayText.innerHTML = s;
                }
            }

            function clearValue(){
                s = "";
                displayText.innerHTML = s;
            }

            function calculateValue(){
                if(s.length > 0){
                    try {
                        let result = eval(s);
                        s = result.toString(); 
                        displayText.innerHTML = s;
                    } catch(e) {
                        displayText.innerHTML = "Error";
                        s = "";
                    }
                }
            }

            document.addEventListener('keydown', function(event) {
                const key = event.key;
                if (!isNaN(key) || key === '.') appendValue(key);
                else if (['+', '-', '*', '/'].includes(key)) appendValue(key);
                else if (key === 'Enter') { event.preventDefault(); calculateValue(); }
                else if (key === 'Backspace') deleteOne();
                else if (key === 'Escape') clearValue();
            });
        </script>
    </body>
</html>